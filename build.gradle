plugins {
    id 'org.asciidoctor.convert' version '2.4.0'
    id 'org.aim42.htmlSanityCheck' version '1.1.6'
}

repositories {
    mavenCentral()
    jcenter()
}


asciidoctor {
    sourceDir = file('docs')
    outputDir = file('build/docs')

    requires project.file('verbose-mode.rb')

    attributes 'source-highlighter': 'coderay'

    resources {
        from(sourceDir) {
            include '**/images/**'
            include '**/media/**'
        }
    }
}

def htmlOutputPath = "$buildDir/docs/html5"

htmlSanityCheck {

    dependsOn asciidoctor

    sourceDir = new File( htmlOutputPath )

    // filter files to check - in Set-notation
    //sourceDocuments = [ "index.html"]

    // where to put results of sanityChecks...
    checkingResultsDir = new File( "$buildDir/report/htmlchecks" )

    //checkExternalLinks = false

    // fail build on errors?
    //failOnErrors = true
}
